{"id":"ccu-cli-45x","title":"Add device-to-room assignment","description":"Add methods to move devices between rooms: assign_device_to_room() and remove_device_from_room(). Investigate CCU-Jack API for device assignment.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:55:00.20439+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.13254+01:00","closed_at":"2026-01-03T08:50:14.13254+01:00","close_reason":"Restructuring into 3 consolidated tickets"}
{"id":"ccu-cli-4bp","title":"Add room rename to CCU client","description":"Add rename_room() method to CCUClient. Investigate CCU-Jack API for room modification endpoint.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:54:57.427518+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.130313+01:00","closed_at":"2026-01-03T08:50:14.130313+01:00","close_reason":"Restructuring into 3 consolidated tickets"}
{"id":"ccu-cli-4mb","title":"Add room creation to CCU client","description":"Add create_room() method to CCUClient. Investigate CCU-Jack API for room creation endpoint and implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:54:56.568243+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.129125+01:00","closed_at":"2026-01-03T08:50:14.129125+01:00","close_reason":"Restructuring into 3 consolidated tickets"}
{"id":"ccu-cli-4u5","title":"WRC6 Treppenhaus-Licht Verknüpfung","description":"Verknüpfung des HmIP-WRC6 Tasters (unten links) mit dem Treppenhaus-Licht (BidCos Schaltaktor).\n\n## Geräte\n- **WRC6**: 000B5D89B014D8 (DG Raffstores) - Kanal 5 (unten links)\n- **Treppenhaus Licht**: REQ0666524 (HM-LC-Sw1-DR, BidCos-RF)\n\n## Anforderungen\n- Tastendruck auf WRC6 unten links schaltet Treppenhaus Licht ein/aus\n- Toggle-Verhalten oder Ein bei Short, Aus bei Long\n\n## Technische Hinweise\n- HmIP zu BidCos Verknüpfung erfordert CCU-Programm (keine Direktverknüpfung möglich)\n- Alternativ: Zentralenprogramm mit Tastendruck als Auslöser","notes":"Programm manuell in WebUI erstellen (create/edit via CLI nicht praktikabel, siehe ccu-cli-nn5)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T12:32:20.148676+01:00","created_by":"malte","updated_at":"2026-01-03T13:56:07.260968+01:00","closed_at":"2026-01-03T13:56:07.260968+01:00","close_reason":"Programm 'WRC6 Treppenhaus Toggle' manuell in WebUI erstellt. Script setzt ON_TIME auf 120s und schaltet dann ein.","dependencies":[{"issue_id":"ccu-cli-4u5","depends_on_id":"ccu-cli-nn5","type":"blocks","created_at":"2026-01-03T12:54:38.671099+01:00","created_by":"malte"}]}
{"id":"ccu-cli-5yk","title":"Device-room assignment via ReGa Script API","description":"Add/remove devices from rooms and list devices in a room. Requires ReGaClient. Includes 'ccu room add-device/remove-device' and device listing within room details.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T08:50:35.505793+01:00","created_by":"malte","updated_at":"2026-01-03T09:09:41.422816+01:00","closed_at":"2026-01-03T09:09:41.422816+01:00","close_reason":"Implemented device-room assignment via ReGa Script API","dependencies":[{"issue_id":"ccu-cli-5yk","depends_on_id":"ccu-cli-6np","type":"blocks","created_at":"2026-01-03T08:50:41.082688+01:00","created_by":"malte"},{"issue_id":"ccu-cli-5yk","depends_on_id":"ccu-cli-73j","type":"parent-child","created_at":"2026-01-03T08:58:46.680886+01:00","created_by":"malte"}]}
{"id":"ccu-cli-6f0","title":"Refactor program commands to use aiohomematic + resource-action pattern","description":"## Context\nThe CLI is migrating from CCU-Jack to aiohomematic. Program operations need to be refactored to:\n1. Use aiohomematic for operations it supports\n2. Keep ReGa client only for operations aiohomematic doesn't provide\n3. Follow kubectl-style resource-action pattern\n\n## Current State\n\n### ReGa Client (`src/ccu_cli/rega.py`) - Program Functions:\n- `list_programs()` - List all programs with details\n- `get_program(program_id)` - Get program by ID\n- `get_program_by_name(name)` - Get program by name\n- `run_program(program_id)` - Execute a program\n- `delete_program(program_id)` - Delete a program (NOT in aiohomematic)\n- `set_program_active(program_id, active)` - Enable/disable program (NOT in aiohomematic)\n\n### aiohomematic Equivalents (from `llms/aiohomematic/common_operations.md`):\n```python\n# Listing programs\nfor program in central.hub.programs:\n    print(f\"Program: {program.name}\")\n    print(f\"  ID: {program.unique_id}\")\n    print(f\"  Active: {program.is_active}\")\n\n# Executing programs\nprogram = central.get_program_by_name(program_name=\"Wake Up Lights\")\nif program:\n    await program.execute()\n\n# Or by ID\nprogram = central.hub.get_program_by_id(\"12345\")\nif program:\n    await program.execute()\n```\n\n### Current CLI Commands (from `src/ccu_cli/cli.py`):\n```\nccu program list\nccu program show \u003cid-or-name\u003e\nccu program run \u003cid-or-name\u003e\nccu program enable \u003cid-or-name\u003e\nccu program disable \u003cid-or-name\u003e\n```\n\n## Requirements\n\n### 1. Use aiohomematic for these operations:\n- List programs → `central.hub.programs`\n- Get program by name → `central.get_program_by_name()`\n- Get program by ID → `central.hub.get_program_by_id()`\n- Run/execute program → `program.execute()`\n\n### 2. Keep ReGa client for these operations (no aiohomematic equivalent):\n- Delete program → `rega.delete_program()`\n- Enable/disable program → `rega.set_program_active()`\n\n### 3. Apply kubectl-style resource-action pattern:\n```\nccu program list              # List all programs\nccu program get \u003cid-or-name\u003e  # Show program details (renamed from 'show')\nccu program run \u003cid-or-name\u003e  # Execute a program\nccu program enable \u003cid-or-name\u003e\nccu program disable \u003cid-or-name\u003e\nccu program delete \u003cid-or-name\u003e  # Add delete command\n```\n\n### 4. Backend Changes\nAdd to `CCUBackend` class in `src/ccu_cli/backend.py`:\n- `list_programs()` - Already exists, verify it uses aiohomematic\n- `get_program(id_or_name)` - Use aiohomematic\n- `run_program(id_or_name)` - Use aiohomematic\n- `delete_program(id_or_name)` - Use ReGa client (needs to be added)\n- `set_program_active(id_or_name, active)` - Use ReGa client (needs to be added)\n\n### 5. Remove redundant ReGa functions\nAfter migrating to backend, these ReGa functions may become unused and can be removed:\n- `list_programs()` - if backend uses aiohomematic\n- `get_program()` - if backend uses aiohomematic\n- `get_program_by_name()` - if backend uses aiohomematic  \n- `run_program()` - if backend uses aiohomematic\n\nKeep only `delete_program()` and `set_program_active()` in ReGa client.\n\n## Testing\n- Update tests in `tests/test_cli.py` for program commands\n- Ensure `tests/test_rega.py` program tests still pass for remaining functions\n- Add tests for new `delete` command\n\n## Files to Modify\n- `src/ccu_cli/backend.py` - Add/update program methods\n- `src/ccu_cli/cli.py` - Update program command group\n- `src/ccu_cli/rega.py` - Remove redundant functions (keep delete_program, set_program_active)\n- `tests/test_cli.py` - Update program command tests\n- `tests/test_rega.py` - Remove tests for removed functions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T10:25:32.689468+01:00","created_by":"malte","updated_at":"2026-01-04T11:16:40.106648+01:00","closed_at":"2026-01-04T11:16:40.106648+01:00","close_reason":"Closed"}
{"id":"ccu-cli-6np","title":"Room CUD operations via ReGa Script API","description":"Create, rename, and delete rooms via ReGa Script API (port 8181). Requires new ReGaClient for direct CCU script execution. Includes 'ccu room create/rename/delete' CLI commands.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T08:50:29.27928+01:00","created_by":"malte","updated_at":"2026-01-03T09:09:02.954604+01:00","closed_at":"2026-01-03T09:09:02.954604+01:00","close_reason":"Implemented room CUD operations via ReGa Script API","dependencies":[{"issue_id":"ccu-cli-6np","depends_on_id":"ccu-cli-9ws","type":"blocks","created_at":"2026-01-03T08:50:41.056035+01:00","created_by":"malte"},{"issue_id":"ccu-cli-6np","depends_on_id":"ccu-cli-73j","type":"parent-child","created_at":"2026-01-03T08:58:46.65547+01:00","created_by":"malte"}]}
{"id":"ccu-cli-73j","title":"Room Management for CCU","description":"Enable full CRUD operations for room management in the HomeMatic CCU via CCU-Jack API.\n\nGoals:\n- List all rooms\n- Show room details with devices\n- Create new rooms\n- Rename rooms\n- Delete rooms\n- Move devices between rooms\n\nThis provides the foundation for organizing smart home devices by location.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-03T07:54:27.92528+01:00","created_by":"malte","updated_at":"2026-01-03T13:57:20.797819+01:00","closed_at":"2026-01-03T13:57:20.797819+01:00","close_reason":"Room Management bereits implementiert (room create/delete/rename, device-room assignment)"}
{"id":"ccu-cli-87z","title":"Add room listing to CCU client","description":"Add list_rooms() method to CCUClient that calls /room endpoint. Returns list of rooms with their IDs and names.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:54:52.842789+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.123817+01:00","closed_at":"2026-01-03T08:50:14.123817+01:00","close_reason":"Restructuring into 3 consolidated tickets"}
{"id":"ccu-cli-9ws","title":"Room listing and discovery via CCU-Jack","description":"List rooms and get room details via CCU-Jack REST API. Includes list_rooms(), get_room() client methods and 'ccu rooms', 'ccu room \u003cid|name\u003e' CLI commands. Supports lookup by ID or name.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T08:50:21.452681+01:00","created_by":"malte","updated_at":"2026-01-03T09:07:07.403137+01:00","closed_at":"2026-01-03T09:07:07.403137+01:00","close_reason":"Implemented room listing","dependencies":[{"issue_id":"ccu-cli-9ws","depends_on_id":"ccu-cli-73j","type":"parent-child","created_at":"2026-01-03T08:58:46.629197+01:00","created_by":"malte"}]}
{"id":"ccu-cli-aeo","title":"Add room details endpoint to CCU client","description":"Add get_room() method to CCUClient that fetches details for a specific room including the devices assigned to it.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:54:53.65517+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.126106+01:00","closed_at":"2026-01-03T08:50:14.126106+01:00","close_reason":"Restructuring into 3 consolidated tickets"}
{"id":"ccu-cli-am3","title":"Implement room CRUD CLI commands","description":"Add CLI commands for room management:\n- ccu room create \u003cname\u003e\n- ccu room rename \u003cold\u003e \u003cnew\u003e\n- ccu room delete \u003cname\u003e\n- ccu room add-device \u003croom\u003e \u003cdevice\u003e\n- ccu room remove-device \u003croom\u003e \u003cdevice\u003e","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:55:01.18726+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.133632+01:00","closed_at":"2026-01-03T08:50:14.133632+01:00","close_reason":"Restructuring into 3 consolidated tickets","dependencies":[{"issue_id":"ccu-cli-am3","depends_on_id":"ccu-cli-4mb","type":"blocks","created_at":"2026-01-03T07:55:10.062964+01:00","created_by":"malte"},{"issue_id":"ccu-cli-am3","depends_on_id":"ccu-cli-4bp","type":"blocks","created_at":"2026-01-03T07:55:10.089437+01:00","created_by":"malte"},{"issue_id":"ccu-cli-am3","depends_on_id":"ccu-cli-aud","type":"blocks","created_at":"2026-01-03T07:55:10.116529+01:00","created_by":"malte"},{"issue_id":"ccu-cli-am3","depends_on_id":"ccu-cli-45x","type":"blocks","created_at":"2026-01-03T07:55:10.143543+01:00","created_by":"malte"}]}
{"id":"ccu-cli-aud","title":"Add room deletion to CCU client","description":"Add delete_room() method to CCUClient. Investigate CCU-Jack API for room deletion endpoint.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:54:58.279291+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.131442+01:00","closed_at":"2026-01-03T08:50:14.131442+01:00","close_reason":"Restructuring into 3 consolidated tickets"}
{"id":"ccu-cli-bps","title":"Refactor room commands to resource-action pattern with aiohomematic integration","description":"Refactor room CLI commands to use resource-action pattern (kubectl-style) and integrate with aiohomematic where possible.\n\n## Current State\n- Room commands exist in cli.py (lines 568-766) using ReGa client only\n- Commands: rooms (list), room show/create/rename/delete/add-device/remove-device/devices\n\n## aiohomematic Capabilities (from docs)\naiohomematic provides READ-ONLY room access:\n- Device.room property - get room assignment for a device\n- Channel.room property - get room for a channel\n- No create/rename/delete room operations\n- No add/remove device from room operations\n\n## ReGa Required (no aiohomematic equivalent)\nKeep these in rega.py:\n- create_room(), rename_room(), delete_room()\n- add_device_to_room(), remove_device_from_room()\n- list_room_devices(), get_device_room()\n- list_rooms() - aiohomematic doesn't expose room listing\n\n## Target CLI Structure (kubectl-style)\n```\nccu room list                    # List all rooms\nccu room get \u003cid-or-name\u003e        # Show room details + devices\nccu room create \u003cname\u003e           # Create room (ReGa)\nccu room delete \u003cid-or-name\u003e     # Delete room (ReGa)\nccu room rename \u003cid-or-name\u003e \u003cnew-name\u003e  # Rename (ReGa)\nccu room add-device \u003croom\u003e \u003cchannel\u003e     # Add device (ReGa)\nccu room remove-device \u003croom\u003e \u003cchannel\u003e  # Remove device (ReGa)\n```\n\n## Changes Needed\n1. Rename 'room show' -\u003e 'room get' (kubectl convention)\n2. Rename 'room devices' -\u003e merge into 'room get' output\n3. Deprecate top-level 'rooms' command -\u003e 'room list'\n4. Allow room lookup by name OR id (like program commands do)\n5. Consider adding room info from aiohomematic (device.room) for cross-reference\n\n## Files to Modify\n- src/ccu_cli/cli.py - room command group\n- src/ccu_cli/rega.py - possibly add get_room_by_name()\n- tests/test_cli.py - update room command tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T10:23:00.207294+01:00","created_by":"malte","updated_at":"2026-01-04T10:25:47.042965+01:00","closed_at":"2026-01-04T10:25:47.042965+01:00","close_reason":"Not going to implement"}
{"id":"ccu-cli-bvd","title":"Replace CCU-Jack with aiohomematic library","description":"Replace CCU-Jack with aiohomematic library as primary backend.\n\n## Motivation\n- CCU-Jack is an extra addon, not available on all CCUs\n- CCU-Jack is no longer actively developed\n- aiohomematic is the library powering Homematic(IP) Local in Home Assistant\n- aiohomematic is actively maintained and well-tested\n- Reduces our own code maintenance burden\n\n## Architecture\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                        ccu-cli                               │\n├─────────────────────────────────────────────────────────────┤\n│  CLI Layer (Click) - Wrapper around backends                 │\n├─────────────────────────────────────────────────────────────┤\n│                    aiohomematic                              │\n│  ✅ Devices, Channels, Datenpunkte, Paramsets               │\n│  ✅ Programme (list, enable/disable)                         │\n│  ✅ Sysvars                                                  │\n│  ✅ Service Messages                                         │\n├─────────────────────────────────────────────────────────────┤\n│              Eigene Erweiterungen (rega.py)                  │\n│  ✅ Räume (CRUD) - not in aiohomematic                       │\n│  ✅ Links/Direktverknüpfungen - not in aiohomematic          │\n│  ✅ Programme ausführen/löschen - not in aiohomematic        │\n│  ✅ Channel/Device umbenennen - not in aiohomematic          │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Breaking Changes\n- Python requirement: \u003e=3.11 → \u003e=3.13\n- Configuration: CCU-Jack URL no longer needed\n\n## Python Version Note\nSystem already has Python 3.14 as default (/opt/homebrew/bin/python3).\nCurrent venv uses 3.12.7 (miniconda) - will be recreated by UV after updating pyproject.toml.\nJust run `uv sync` after changing requires-python and UV handles the rest.\n\n## Implementation Steps\n1. Add aiohomematic dependency\n2. Update Python requirement to \u003e=3.13 in pyproject.toml\n3. Run `uv sync` to recreate venv with Python 3.13+\n4. Create adapter layer to wrap aiohomematic for CLI use\n5. Migrate device/channel/datapoint operations to aiohomematic\n6. Migrate sysvar operations to aiohomematic\n7. Migrate program list/enable/disable to aiohomematic\n8. Keep rega.py for: rooms, links, program run/delete, rename\n9. Remove client.py (CCU-Jack client)\n10. Update/remove CCU-Jack specific tests\n11. Update configuration (remove CCU-Jack URL)\n\n## Testing Strategy\n- CLI tests (test_cli.py) mock the backend layer → serve as guardrails\n- test_client.py tests CCU-Jack directly → will be removed\n- New adapter layer needs integration tests against real CCU\n\n## References\n- aiohomematic: https://github.com/SukramJ/aiohomematic\n- Architecture: https://github.com/SukramJ/aiohomematic/blob/devel/docs/architecture.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T08:29:56.93424+01:00","created_by":"malte","updated_at":"2026-01-04T10:11:49.521072+01:00","closed_at":"2026-01-04T10:11:49.521072+01:00","close_reason":"Migrated to aiohomematic. CCU-Jack client removed, new backend adapter created.","dependencies":[{"issue_id":"ccu-cli-bvd","depends_on_id":"ccu-cli-x1t","type":"blocks","created_at":"2026-01-04T08:53:36.719295+01:00","created_by":"malte"}]}
{"id":"ccu-cli-dm7","title":"Fix HomeMatic channel naming conventions","description":"## Goal\nEnsure all HomeMatic channels have meaningful names following a consistent naming convention.\n\n## Background\nAnalysis shows many channels with:\n- Raw addresses as names (e.g., `SEQ2681600:1`)\n- Just numbers (`0`, `1`, `2`)\n- Cryptic abbreviations (`FK`, `NN 1`, `Akt`)\n- Typos (`Balktür`, `Venil`)\n\n## Naming Convention to Apply\n\n### Channel Name Pattern\n```\n\u003cDevice Name\u003e \u003cChannel Function\u003e\n```\n\nWhere Channel Function depends on device type:\n\n### HM-CC-RT-DN (Radiator Thermostat)\n| Channel | Function | Suggested Suffix |\n|---------|----------|------------------|\n| 0 | Maintenance | `Wartung` |\n| 1 | Weather | `Wetter` |  \n| 2 | Climate Control | `Klima` |\n| 3 | Window Receiver | `Fenster Empf` |\n| 4 | Climate Sender | `Klima Sender` |\n| 5 | Climate Receiver | `Klima Empf` |\n| 6 | Window Sender | `Fenster Sender` |\n\n### HM-TC-IT-WM-W-EU (Wall Thermostat)\n| Channel | Function | Suggested Suffix |\n|---------|----------|------------------|\n| 0 | Maintenance | `Wartung` |\n| 1 | Weather | `Wetter` |\n| 2 | Climate Control | `Klima` |\n| 3 | Window Receiver | `Fenster Empf` |\n| 6 | Climate Sender | `Klima Sender` |\n| 7 | Climate Receiver | `Klima Empf` |\n\n### HM-Sec-SCo (Window/Door Contact)\n| Channel | Function | Suggested Suffix |\n|---------|----------|------------------|\n| 0 | Maintenance | `Wartung` |\n| 1 | Sensor | `Kontakt` |\n\n### HmIP-FBL (Blind Actuator)\n| Channel | Function | Suggested Suffix |\n|---------|----------|------------------|\n| 0-3 | System | (can remain numbered) |\n| 4 | Actuator | `Aktor` |\n| 5-7 | Virtual | (can remain numbered) |\n\n## Channels to Fix\n\n### Address-Only Names (Critical)\n| Device | Channel | Current | Suggested |\n|--------|---------|---------|-----------|\n| Malte Büro Rechts | :1 | `SEQ2681600:1` | `Malte Büro Rechts Kontakt` |\n| Balkontür | :1 | `SEQ2681597:1` | `Balkontür Kontakt` |\n| Ofen Links | :1 | `KEQ0506807:1` | `Ofen Links Wetter` |\n| Wohnzimmer Rechts | :4 | `KEQ0518799:4` | `Wohnzimmer Rechts Klima Sender` |\n| Wohnzimmer | :3 | `LEQ0996243:3` | `Wohnzimmer Fenster Empf` |\n| Ofenzimmer Thermostat | :2 | `MEQ1573216:2` | `Ofenzimmer Klima` |\n| DG Bad | :7 | `000E58A991EF88:7` | `DG Bad Klima Empf` |\n\n### Typos to Fix\n| Device | Channel | Current | Corrected |\n|--------|---------|---------|-----------|\n| Balkontür | :0 | `Balktür Wart` | `Balkontür Wartung` |\n| Küche Heizung Ventil | :2 | `Küche Venil Aktor` | `Küche Ventil Aktor` |\n\n### Cryptic Abbreviations\n| Device | Channels | Current | Decision Needed |\n|--------|----------|---------|-----------------|\n| Various | Multiple | `FK` | Expand to `Fensterkontakt`? Or is this a link name? |\n| EG Multi-Schalter | 1-20 | `NN 1`-`NN 20` | Rename to actual functions or leave as placeholders? |\n| DG Rollos | :4 | `Akt` | Expand to `Aktor` |\n\n### Inconsistent Abbreviations\nDecide on standard:\n- `WZ` vs `Wohnzimmer` → Recommend: Full name\n- `Empf` vs `Empfänger` → Recommend: `Empf` (shorter)\n- `Thermo` vs `Thermostat` → Recommend: `Thermo` for channels\n\n## Acceptance Criteria\n- [ ] No channels with raw address names\n- [ ] No channels with just numbers (except system channels 0)\n- [ ] All typos fixed\n- [ ] Consistent abbreviation usage documented\n- [ ] Channel names follow `\u003cDevice\u003e \u003cFunction\u003e` pattern","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T11:15:10.473674+01:00","created_by":"malte","updated_at":"2026-01-04T11:15:10.473674+01:00","dependencies":[{"issue_id":"ccu-cli-dm7","depends_on_id":"ccu-cli-w53","type":"blocks","created_at":"2026-01-04T11:15:18.008043+01:00","created_by":"malte"}]}
{"id":"ccu-cli-fzh","title":"Rauchmelder DG löst Rolladen-Hochfahren aus","description":"Wenn die Rauchmelder im Dachgeschoss auslösen, sollen die Rolläden/Raffstores hochfahren.\n\n## Geräte\n- Rauchmelder DG Wohnzimmer (002E64099A9B4E:1)\n- Rauchmelder DG Schlafzimmer (002E64099A9B5E:1)\n- DG Raffstores (000B5D89B014D8) - HmIP-WRC6 Wandtaster (unklar ob dies die Aktoren sind)\n\n## Technische Umsetzung\n- Keine Direktverknüpfung möglich (HmIP-SWSD-2 unterstützt keine Direktverknüpfungen)\n- CCU-Programm erforderlich, das auf SMOKE_DETECTOR_ALARM_STATUS reagiert\n- Programm muss bei Alarm die Raffstore-Aktoren auf LEVEL=100% setzen\n\n## Offene Fragen\n- Welche Aktoren steuern die DG Raffstores tatsächlich?\n- Sollen alle Raffstores im DG hochfahren oder nur bestimmte?\n\n## Referenzen\n- https://homematic-forum.de/forum/viewtopic.php?t=47048 (HmIP-SWSD keine Direktverknüpfung)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T13:12:50.078405+01:00","created_by":"malte","updated_at":"2026-01-03T13:12:50.078405+01:00"}
{"id":"ccu-cli-hyo","title":"Swarm: Room Management for CCU","description":"Swarm molecule orchestrating epic ccu-cli-73j.\n\nEpic: ccu-cli-73j\nCoordinator: ","status":"closed","priority":2,"issue_type":"molecule","created_at":"2026-01-03T08:58:53.644786+01:00","created_by":"malte","updated_at":"2026-01-03T13:57:20.79497+01:00","closed_at":"2026-01-03T13:57:20.79497+01:00","close_reason":"Room Management bereits implementiert (room create/delete/rename, device-room assignment)","dependencies":[{"issue_id":"ccu-cli-hyo","depends_on_id":"ccu-cli-73j","type":"relates-to","created_at":"2026-01-03T08:58:53.645418+01:00","created_by":"malte"}]}
{"id":"ccu-cli-ix1","title":"ccu program: list, show, run, delete Befehle","description":"Implementiere grundlegende program Subcommands:\n\n## Befehle\n- `ccu program list` - Liste aller Programme (erweitert bestehendes `programs`)\n- `ccu program show \u003cid\u003e` - Details eines Programms (active, visible, last_exec, description)\n- `ccu program run \u003cid\u003e` - Programm ausführen (existiert als `run`, verschieben)\n- `ccu program delete \u003cid\u003e` - Programm löschen (via ReGa dom.DeleteObject)\n- `ccu program enable/disable \u003cid\u003e` - Active-Flag setzen\n\n## Technische Basis\n- CCU-Jack API für list/run (bereits implementiert)\n- ReGa Script für delete/enable/disable (analog zu XML-API programactions.cgi)\n\n## Referenzen\n- docs/xml-api/xmlapi/programlist.cgi\n- docs/xml-api/xmlapi/programactions.cgi","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T12:54:14.02845+01:00","created_by":"malte","updated_at":"2026-01-03T13:01:18.762549+01:00","closed_at":"2026-01-03T13:01:18.762549+01:00","close_reason":"Closed"}
{"id":"ccu-cli-jvy","title":"DG Raffstore-Gruppensteuerung mit WRC6","description":"Konfiguration der HmIP-FBL Raffstores im Dachgeschoss als Gruppen und Steuerung über den HmIP-WRC6 Wandtaster.\n\n## Geräte\n- **WRC6**: 000B5D89B014D8 (DG Raffstores)\n- **FBL Schlafzimmer**: 0013A409971044, 0013A40997105E (2 Stück)\n- **FBL Wohnzimmer**: 0013A4099710C0, 00139BE98F1C20, 0013A409971088 (3 Stück)\n\n## Tastenbelegung WRC6\n| Position | Kanal | Funktion |\n|----------|-------|----------|\n| Oben links | 1 | Schlafzimmer runter |\n| Oben rechts | 2 | Schlafzimmer rauf |\n| Mitte links | 3 | Wohnzimmer runter |\n| Mitte rechts | 4 | Wohnzimmer rauf |\n| Unten links | 5 | (reserviert für Treppenhaus, siehe ccu-cli-4u5) |\n| Unten rechts | 6 | (frei) |\n\n## Akzeptanzkriterien\n\n### Gruppenbildung\n- [ ] Schlafzimmer: 2 FBL-Aktoren reagieren synchron als Gruppe\n- [ ] Wohnzimmer: 3 FBL-Aktoren reagieren synchron als Gruppe\n\n### Tasterverhalten (intuitiv, nicht Homematic-Standard)\n- [ ] **Kurzer Tastendruck Runter**: Raffstore fährt ganz zu (0%)\n- [ ] **Kurzer Tastendruck Rauf**: Raffstore fährt ganz auf (100%)\n- [ ] **Kurzer Tastendruck während Fahrt**: Stopp an aktueller Position\n- [ ] **Langer Tastendruck Runter**: Fährt runter solange gedrückt, stoppt bei Loslassen\n- [ ] **Langer Tastendruck Rauf**: Fährt rauf solange gedrückt, stoppt bei Loslassen\n\n### Lamellensteuerung\n- [ ] Nach Stopp bei geschlossenem Raffstore: Kurzes Antippen kippt Lamellen schrittweise\n\n## Technische Umsetzung\n- Lamellenverstellzeit auf 0 setzen (vermeidet Ruckeln, ermöglicht intuitives Verhalten)\n- WRC6 PRESS_SHORT → Endposition anfahren\n- WRC6 PRESS_LONG → Fahren solange gedrückt\n- Gruppensteuerung über CCU-Programm oder Direktverknüpfungen\n\n## Hinweise\n- Homematic-Standard wäre: kurz=Endposition, lang=Lamellen. Wir weichen davon ab zugunsten intuitiverer Bedienung.\n- Quelle: https://homematic-forum.de/forum/viewtopic.php?t=39548","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T12:32:09.262049+01:00","created_by":"malte","updated_at":"2026-01-04T08:03:51.821771+01:00","closed_at":"2026-01-04T08:03:51.821771+01:00","close_reason":"Alle Direktverknüpfungen für WRC6 DG Raffstores erstellt: Kanal 1/2 für Schlafzimmer (2 FBLs), Kanal 3/4 für Wohnzimmer (3 FBLs). Erstellt via ccu link add CLI."}
{"id":"ccu-cli-nn5","title":"ccu program: create/edit Befehle","description":"Implementiere Programm-Erstellung und -Bearbeitung via ReGa Script.\n\n## Befehle\n- `ccu program create-toggle \u003cname\u003e \u003ctrigger_channel\u003e \u003caction_channel\u003e` - Toggle-Programm erstellen\n- `ccu program create \u003cname\u003e --trigger=... --action=...` - Generisches Programm erstellen\n\n## Herausforderungen\n- ReGa Script Programm-Objektmodell ist komplex (OT_PROGRAM, OT_CONDITION, OT_DEST, etc.)\n- Kaum Dokumentation für programmatische Programmerstellung\n- XML-API hat keine create/edit Funktionalität\n\n## Recherche nötig\n- CCU WebUI Source Code analysieren (wie erstellt die UI Programme?)\n- ReGa Objektmodell Dokumentation (Teil 2)\n- Bestehende Programme via ReGa analysieren für Reverse Engineering\n\n## Abhängigkeiten\n- Blockiert: ccu-cli-4u5 (WRC6 Treppenhaus-Licht Verknüpfung)","notes":"## Entscheidung: Nicht implementieren\n\nNach Recherche der ReGa Script API für Programm-Erstellung:\n\n### Gründe gegen Implementation:\n1. **Undokumentiert** - Konstanten wie ConditionType(3), ConditionType(9) nirgends erklärt\n2. **Komplex** - Verschachtelte Struktur: Program → Rule → Condition → SingleCondition → Destination → SingleDestination\n3. **Fragil** - Forum warnt vor Breaking Changes bei Rega-Updates\n4. **Einzige Quelle**: eq-3/occu hm_autoconf mit Beispielen, aber ohne Dokumentation der Werte\n\n### Recherchierte Quellen:\n- https://github.com/eq-3/occu/blob/master/WebUI/bin/hm_autoconf\n- https://github.com/OpenCCU/ReGaHss-Test\n- https://homematic-forum.de/forum/viewtopic.php?t=62318\n- https://github.com/HMMike/Script-Developer-CCU\n\n### Bestehende Funktionalität (ausreichend):\n- ccu program list/show/run/enable/disable/delete\n\n### Alternative für ccu-cli-4u5 (Treppenhaus):\nProgramm manuell in WebUI erstellen.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T12:54:34.066915+01:00","created_by":"malte","updated_at":"2026-01-03T13:08:21.015748+01:00","closed_at":"2026-01-03T13:08:21.015751+01:00"}
{"id":"ccu-cli-ntz","title":"Refactor CLI to resource-action pattern (kubectl-style)","description":"Restructure CLI commands to follow the common resource-action pattern used by kubectl, docker, gh etc.\n\n## Current State\n- `ccu devices` (list)\n- `ccu device \u003cserial\u003e` (show)\n- `ccu rename` (should be under device)\n- `ccu config` (should be under device)\n- `ccu rooms` vs `ccu room`\n\n## Target State\n```\nccu device list                    # Liste aller Geräte\nccu device get \u003cserial\u003e            # Kompakte Übersicht (renamed from show)\nccu device get \u003cserial\u003e --json     # Volles JSON\nccu device rename \u003cserial\u003e \u003cname\u003e  # Umbenennen\nccu device config \u003cserial\u003e         # MASTER Parameter\nccu device refresh                 # Reload vom CCU\n\nccu room list\nccu room get \u003cname\u003e\n...\n```\n\n## Benefits\n- Consistent, predictable command structure\n- Better discoverability via `ccu device --help`\n- Default output can be human-friendly, --json for scripting\n- Easier to extend with new actions per resource\n\n## XML-RPC Cleanup (as part of this refactor)\n\nThe following XML-RPC client functions should be removed/refactored as they have aiohomematic equivalents:\n\n### Remove from `src/ccu_cli/xmlrpc.py`:\n- `list_devices()` → Use `api.list_devices()` from aiohomematic via backend\n- `get_device_description()` → Use device objects from aiohomematic via backend\n\n### Backend already provides:\n- `CCUBackend.list_devices()` - uses aiohomematic\n- Device details available via `CCUBackend.get_device()` or similar\n\n### Files to update:\n- `src/ccu_cli/xmlrpc.py` - Remove `list_devices()` and `get_device_description()`\n- `src/ccu_cli/cli.py` - Ensure device commands use backend, not xmlrpc directly\n- `tests/test_xmlrpc.py` - Remove tests for removed functions","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2026-01-04T08:24:23.638291+01:00","created_by":"malte","updated_at":"2026-01-04T11:17:16.840564+01:00","dependencies":[{"issue_id":"ccu-cli-ntz","depends_on_id":"ccu-cli-bvd","type":"blocks","created_at":"2026-01-04T08:30:03.408326+01:00","created_by":"malte"}]}
{"id":"ccu-cli-ox3","title":"Implement 'ccu rooms' CLI command","description":"Add CLI command to list all rooms in a table format showing room ID and name.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:54:54.714759+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.127068+01:00","closed_at":"2026-01-03T08:50:14.127068+01:00","close_reason":"Restructuring into 3 consolidated tickets","dependencies":[{"issue_id":"ccu-cli-ox3","depends_on_id":"ccu-cli-87z","type":"blocks","created_at":"2026-01-03T07:55:10.009961+01:00","created_by":"malte"}]}
{"id":"ccu-cli-qjl","title":"Refactor link commands to use aiohomematic + resource-action pattern","description":"## Context\nThe CLI is migrating from CCU-Jack to aiohomematic. Link (Direktverknüpfung) operations need to be refactored to:\n1. Use aiohomematic for operations it supports\n2. Keep XML-RPC client only for operations aiohomematic doesn't provide\n3. Follow kubectl-style resource-action pattern\n\n## Current State\n\n### XML-RPC Client (`src/ccu_cli/xmlrpc.py`) - Link Functions:\n- `get_links(address)` - Get all device links or links for specific address\n- `get_link_peers(address)` - Get all link peers for a channel\n- `add_link(sender, receiver, name, description)` - Create a new device link\n- `remove_link(sender, receiver)` - Remove a device link\n- `get_link_info(sender, receiver)` - Get detailed info about a specific link\n- `get_paramset(address, paramset_key)` - Get parameter set for a channel\n- `get_link_paramset(sender, receiver)` - Get LINK paramset for a device link\n- `set_link_paramset(sender, receiver, params)` - Set parameters for a device link\n\n### aiohomematic Equivalents (from `llms/aiohomematic/common_operations.md`):\n```python\n# Get link peers for a device\npeers = await central.get_link_peers(address=\"VCU0000001:1\")\n\n# Create link\nawait central.add_link(\n    sender_address=\"VCU0000001:1\",\n    receiver_address=\"VCU0000002:1\",\n    name=\"My Link\",\n    description=\"Button controls light\",\n)\n\n# Remove link\nawait central.remove_link(\n    sender_address=\"VCU0000001:1\",\n    receiver_address=\"VCU0000002:1\",\n)\n```\n\n## Requirements\n\n### 1. Use aiohomematic for these operations:\n- Get link peers → `central.get_link_peers()`\n- Add link → `central.add_link()`\n- Remove link → `central.remove_link()`\n\n### 2. Keep XML-RPC client for these operations (no aiohomematic equivalent):\n- `get_links()` - Returns full DeviceLink objects with name/description (aiohomematic only returns peer addresses)\n- `get_link_info()` - Detailed link info with flags\n- `get_link_paramset()` - Get LINK paramset between sender/receiver\n- `set_link_paramset()` - Set link parameters\n- `get_paramset()` - General paramset access (may be useful for LINK paramsets)\n\n### 3. Apply kubectl-style resource-action pattern:\n```\nccu link list [--address \u003caddr\u003e]   # List all links or links for address\nccu link get \u003csender\u003e \u003creceiver\u003e   # Show link details\nccu link create \u003csender\u003e \u003creceiver\u003e [--name] [--description]  # Create link\nccu link delete \u003csender\u003e \u003creceiver\u003e  # Remove link\nccu link config get \u003csender\u003e \u003creceiver\u003e  # Get link paramset\nccu link config set \u003csender\u003e \u003creceiver\u003e \u003cparam\u003e=\u003cvalue\u003e  # Set link param\n```\n\n### 4. Backend Changes\nAdd to `CCUBackend` class in `src/ccu_cli/backend.py`:\n- `list_links(address=None)` - Use XML-RPC `get_links()` for full details\n- `get_link(sender, receiver)` - Use XML-RPC `get_link_info()`\n- `create_link(sender, receiver, name, description)` - Use aiohomematic\n- `delete_link(sender, receiver)` - Use aiohomematic\n- `get_link_paramset(sender, receiver)` - Use XML-RPC\n- `set_link_paramset(sender, receiver, params)` - Use XML-RPC\n\n### 5. Remove redundant XML-RPC functions\nAfter migrating to backend:\n- `get_link_peers()` - Replaced by aiohomematic (only needed if `get_links` doesn't suffice)\n- `add_link()` - Replaced by aiohomematic via backend\n- `remove_link()` - Replaced by aiohomematic via backend\n\nKeep in XML-RPC client:\n- `get_links()` - For full link details with names\n- `get_link_info()` - For detailed link info\n- `get_link_paramset()` - For link configuration\n- `set_link_paramset()` - For link configuration\n- `get_paramset()` - General utility\n\n## Testing\n- Add tests in `tests/test_cli.py` for link commands\n- Update `tests/test_xmlrpc.py` - Remove tests for removed functions\n- Add backend tests for new link methods\n\n## Files to Modify\n- `src/ccu_cli/backend.py` - Add link methods\n- `src/ccu_cli/cli.py` - Add link command group\n- `src/ccu_cli/xmlrpc.py` - Remove redundant functions\n- `tests/test_cli.py` - Add link command tests\n- `tests/test_xmlrpc.py` - Update tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T10:30:29.921743+01:00","created_by":"malte","updated_at":"2026-01-04T10:42:37.099276+01:00","closed_at":"2026-01-04T10:42:37.099276+01:00","close_reason":"Implemented and merged to main"}
{"id":"ccu-cli-s2p","title":"Implement 'ccu room \u003cname\u003e' CLI command","description":"Add CLI command to show room details including all devices in that room.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T07:54:55.542296+01:00","created_by":"malte","updated_at":"2026-01-03T08:50:14.128106+01:00","closed_at":"2026-01-03T08:50:14.128106+01:00","close_reason":"Restructuring into 3 consolidated tickets","dependencies":[{"issue_id":"ccu-cli-s2p","depends_on_id":"ccu-cli-aeo","type":"blocks","created_at":"2026-01-03T07:55:10.037405+01:00","created_by":"malte"}]}
{"id":"ccu-cli-w53","title":"Fix HomeMatic device naming and room assignments","description":"## Goal\nEnsure all HomeMatic devices have meaningful names and are properly assigned to rooms.\n\n## Background\nAnalysis of the current CCU installation shows 11 devices (25%) with poor naming:\n- Devices using raw address as name (e.g., `HmIP-SWDO-I 001098A98B1682`)\n- Devices with model+address fallback names\n\n## Devices to Fix\n\n### Unnamed HmIP Devices (address-only names)\n| Address | Model | Current Name | Location Needed |\n|---------|-------|--------------|-----------------|\n| `001098A98B1682` | HmIP-SWDO-I | `HmIP-SWDO-I 001098A98B1682` | Door/Window sensor - where? |\n| `004F640996775D` | HmIP-HAP2 | `HmIP-HAP2 004F640996775D` | Access Point - which floor? |\n| `001F9D899096FF` | HmIP-CCU3 | `HmIP-CCU3 001F9D899096FF` | CCU itself |\n\n### Smoke Detectors (device unnamed, channel named)\n| Address | Current Device Name | Channel 1 Name |\n|---------|---------------------|----------------|\n| `002E64099A9B4E` | `HmIP-SWSD-2 002E64099A9B4E` | Rauchmelder DG Wohnzimmer |\n| `002E64099A9B5E` | `HmIP-SWSD-2 002E64099A9B5E` | Rauchmelder DG Schlafzimmer |\n\nThese should have device names matching the channel names.\n\n## Room Assignment Check\nVerify all devices/channels are assigned to appropriate rooms:\n- DG (Dachgeschoss): Büro, Bad, Wohnzimmer, WC, Schlafzimmer\n- OG (Obergeschoss): Erker, Kamin/Ofenzimmer\n- EG (Erdgeschoss): Wohnzimmer, Küche, Bad, Treppenhaus\n- KG (Keller): Badezimmer\n\n## Acceptance Criteria\n- [ ] All devices have human-readable names (no address-only names)\n- [ ] Device names follow pattern: `\u003cRoom\u003e \u003cDeviceType\u003e` or `\u003cRoom\u003e \u003cFunction\u003e`\n- [ ] All channels assigned to appropriate rooms\n- [ ] Run `ccu devices` shows no address-only names","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T11:14:24.417754+01:00","created_by":"malte","updated_at":"2026-01-04T11:14:42.922004+01:00"}
{"id":"ccu-cli-x1t","title":"Add aiohomematic docs for agents","description":"Copy key aiohomematic documentation locally for AI agent context.\n\n## Rationale\nType hints and docstrings (via LSP/venv source) provide signatures, but agents need:\n- **Concepts**: How do components relate?\n- **Patterns**: What's the typical usage flow?\n- **Best practices**: When to use what?\n\nOnly 3 key docs needed - no fancy tooling required.\n\n## Structure\n```\nllms/\n  aiohomematic/\n    getting_started.md     # Basic usage pattern\n    common_operations.md   # Frequent use cases  \n    architecture.md        # Component relationships\n  sync.sh                  # Simple curl script\n```\n\n## Implementation\n\n### sync.sh\n```bash\n#!/bin/bash\nset -e\nBASE=\"https://raw.githubusercontent.com/SukramJ/aiohomematic/devel/docs\"\nDIR=\"$(dirname \"$0\")/aiohomematic\"\nmkdir -p \"$DIR\"\n\necho \"Syncing aiohomematic docs...\"\ncurl -s \"$BASE/getting_started.md\" \u003e \"$DIR/getting_started.md\"\ncurl -s \"$BASE/common_operations.md\" \u003e \"$DIR/common_operations.md\"\ncurl -s \"$BASE/architecture.md\" \u003e \"$DIR/architecture.md\"\necho \"Done.\"\n```\n\n## Usage\n```bash\nchmod +x llms/sync.sh\n./llms/sync.sh\n```\n\nAgents can then Read these files directly for context.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T08:53:30.737788+01:00","created_by":"malte","updated_at":"2026-01-04T09:14:01.129413+01:00","closed_at":"2026-01-04T09:14:01.129413+01:00","close_reason":"Implemented: llms/aiohomematic/ docs + sync.sh + AGENTS.md/CLAUDE.md references"}
{"id":"ccu-cli-zq2","title":"Swarm: Room Management for CCU","description":"Swarm molecule orchestrating epic ccu-cli-73j.\n\nEpic: ccu-cli-73j\nCoordinator: ","status":"closed","priority":2,"issue_type":"molecule","created_at":"2026-01-03T08:58:01.523511+01:00","created_by":"malte","updated_at":"2026-01-03T13:57:20.796588+01:00","closed_at":"2026-01-03T13:57:20.796588+01:00","close_reason":"Room Management bereits implementiert (room create/delete/rename, device-room assignment)","dependencies":[{"issue_id":"ccu-cli-zq2","depends_on_id":"ccu-cli-73j","type":"relates-to","created_at":"2026-01-03T08:58:01.524091+01:00","created_by":"malte"}]}
